<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <title>Node + Express + MongoDb example</title>
  </head>

  <body>
    
    <h1>Node + Express + MongoDb example</h1>
    <p>import rule(file name): DBName - collectionName .json</p>
    <form id="formid" method="POST" enctype="multipart/form-data">
      <input style="width: 500px;" type="file" accept="application/JSON" name="myfile"/>
    </form>

    <button style="margin-top: 20px;height: 30px;width: 90px;" id='uploadBtn'>import json</button>

    <h3>============================================</h3>

    <button style="margin-top: 10px;height: 30px;width: 90px;" id='exportBtn'>export</button>

  </body>

  <script>

    const uploadBtn = document.getElementById('uploadBtn');
    const exportButton = document.getElementById('exportBtn');

    uploadBtn.addEventListener('click', function(e) {
      
      const xhr = new XMLHttpRequest();

      const form = document.getElementById("formid");
      let formData = new FormData(form);
      // let formData = new FormData();

      xhr.onload = () => {
        if(xhr.status === 200) {
          alert('upload success')
        } else {
          alert('upload fail, please check again...')
        }
      }

      xhr.open("post", "/import", true);
      xhr.send(formData);

    });

    exportButton.addEventListener('click', function(e) {
      const xhr = new XMLHttpRequest();

      xhr.onload = () => {
        if(xhr.status === 200) {
          alert('export success')
        } else {
          alert('export fail, please check again...')
        }
      }

      xhr.open("get", "/export", true);
      xhr.send();
    });

  </script>
</html>