<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <title>Node + Express + MongoDb example</title>
  </head>

  <body>
    
    <h1>Node + Express + MongoDb example</h1>
    <p>Loading data button click.</p>
    <form id="formid" method="POST" enctype="multipart/form-data">
      <input type="file" accept="application/JSON" name="myfile"/>
    </form>

    <button style="margin-top: 20px;height: 30px;width: 90px;cursor: pointer;" id='uploadBtn'>upload json</button>

  </body>

  <script>

    const button = document.getElementById('uploadBtn');

    button.addEventListener('click', function(e) {
      
      const xhr = new XMLHttpRequest();

      const form = document.getElementById("formid");
      let formData = new FormData(form);
      // let formData = new FormData();

      xhr.onload = () => {
        if(xhr.status === 200) {
          alert('upload success')
        } else {
          alert('upload fail, please check again...')
        }
      }

      xhr.open("post", "/import", true);
      xhr.send(formData);

    });
  </script>
</html>